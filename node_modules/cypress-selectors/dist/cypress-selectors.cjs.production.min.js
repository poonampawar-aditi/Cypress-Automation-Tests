"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash");function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var n={LOG_PREFIX:"[cypress-selectors]",logSelector:function(e,t,r){return void 0===r&&(r="info"),n.log('Querying "'+t+'" by selector: '+e,r)},appendLogPrefix:function(e){return n.LOG_PREFIX+" "+e},log:function(e,t){var r=n.LOG_PREFIX+" "+e;return"info"===t?console.info(r):"warning"===t?console.warn(r):"error"===t?console.error(r):void console.log(r)}},i=Symbol("INTERNAL_ALIAS_KEY"),o=Symbol("HOST_ID"),a=Symbol("SELECTORS_BY_EXTERNAL_ALIAS_STORAGE"),l=Symbol("SELECTORS_BY_INTERNAL_ALIAS_STORAGE"),s=function(e,t){return void 0===t&&(t="INTERNAL ERROR"),new Error(n.appendLogPrefix("Error type: "+t+", message: "+e))},u=function(e,t){return e.name+"."+t},p=function(e){var t=[e].flatMap(c).flatMap(y).flatMap(f).map(g);return 1===t.length?t[0]:"concat("+t.join(", ")+")"},c=function(e){return e.split(/(?=[",])|(?<=["])/g)},y=function(e){return e.split(/(?=[',])|(?<=['])/g)},f=function(e){return e.split(/(?=[`,])|(?<=[`])/g)},g=function(e){return"'"===e?'"\'"':'"'===e?"'\"'":"`"===e?'"`"':"'"+e+"'"},d=function(e){if("attribute"===e)return"ByAttribute";if("class"===e)return"ByClass";if("id"===e)return"ById";if("type"===e)return"ByType";if("selector"===e)return"BySelector";if("xpath"===e)return"ByXPath";if("name"===e)return"ByName";if("exact-text"===e)return"ByExactText";if("partial-text"===e)return"ByPartialText";if("exact-link-text"===e)return"ByExactLinkText";if("partial-link-text"===e)return"ByPartialLinkText";throw s("Unsupported selector type: "+e,"INTERNAL ERROR")},h={defaultAttribute:"cypress-id",isLoggingEnabled:!1,searchOnlyFirstLevelDescendants:!1},v={reset:function(){return v.config=t({},h)},configure:function(e){var t=e.defaultAttribute,r=e.isLoggingEnabled,n=void 0!==r&&r,i=e.searchOnlyFirstLevelDescendants,o=void 0!==i&&i,a=v.config;return a.defaultAttribute=void 0===t?"cypress-id":t,a.isLoggingEnabled=n,a.searchOnlyFirstLevelDescendants=o,a},config:t({},h)},x=v.configure,m=v.reset,b=function(e,t){if(e.has(t))return e.get(t);throw s('Failed to retrieve parent selector by "'+t+'" alias.',"NO SUCH ALIAS")},C=function(e,t){return e.map((function(e){return E(e,t)})).join(t.searchOnlyFirstLevelDescendants?">":" ")},P=function(t){var r=Cypress.config().defaultCommandTimeout;return e.max(t.map((function(e){var t;return null!=(t=e.config.timeout)?t:r})))},E=function(e,t){var r=A(e,t),n=e.config.eq;return"number"==typeof n&&"CSS"===e.engine?r+":eq("+n+")":r},A=function(e,t){var r=e.type,n=e.config,i=n.value,o=n.attribute;if("attribute"===r)return"["+(null!=o?o:t.defaultAttribute)+'="'+i+'"]';if("class"===r)return"."+i;if("id"===r)return"#"+i;if("type"===r)return""+i;if("selector"===r)return i;if("xpath"===r)return i;if("name"===r)return'[name="'+i+'"]';if("exact-text"===r)return T(e);if("partial-text"===r)return S(e);if("exact-link-text"===r)return T(e,"a");if("partial-link-text"===r)return S(e,"a");throw s("Unsupported selector type: "+r,"INTERNAL ERROR")},T=function(e,t){void 0===t&&(t="*");var r=N(e)?"./"+t:"//"+t,n=e.config,i=n.ignoreCase,o=p(n.value);return!0===i?r+"[translate(text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')="+o.toLowerCase()+"]":r+"[text()="+o+"]"},S=function(e,t){void 0===t&&(t="*");var r=N(e)?"./"+t:"//"+t,n=e.config,i=n.ignoreCase,o=p(n.value);return!0===i?r+"[contains(translate(text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), "+o.toLowerCase()+")]":r+"[contains(text(), "+o+")]"},N=function(e){var t=e.config;return void 0!==t.parentAlias||void 0!==t.internalParentAlias},O=["partial-text","exact-text","exact-link-text","partial-link-text"],_=["attribute"],w=function(e,t,r){var n=t.externalConfig,i=typeof n[e];return e in n&&i!==r&&(W(t.displayProperty,e,r,i),delete n[e]),n},R=function(e){var t=e.externalConfig,r=e.type,n=e.displayProperty;return void 0!==(t=w("parentAlias",{externalConfig:t,displayProperty:n,type:r},"string")).parent&&"string"==typeof t.parentAlias&&(U(n),delete t.parentAlias),{externalConfig:t,displayProperty:n,type:r}},I=function(e){var t=e.externalConfig,r=e.type,n=e.displayProperty;return"string"==typeof(t=w("alias",{externalConfig:t,displayProperty:n,type:r},"string")).alias&&0===t.alias.length&&(F(n),delete t.alias),{externalConfig:t,displayProperty:n,type:r}},L=function(e){var t=e.externalConfig,r=e.type,n=e.displayProperty;return"string"==typeof(t=w("parentAlias",{externalConfig:t,displayProperty:n,type:r},"string")).parentAlias&&0===t.parentAlias.length&&(q(n),delete t.parentAlias),{externalConfig:t,displayProperty:n,type:r}},B=function(e){var t=e.externalConfig,r=e.type,n=e.displayProperty;return"string"==typeof(t=w("attribute",{externalConfig:t,displayProperty:n,type:r},"string")).attribute&&0===t.attribute.length&&(Y(n),delete t.attribute),{externalConfig:t,displayProperty:n,type:r}},D=function(e){var t=e.externalConfig,r=e.type,n=e.displayProperty;return"number"==typeof(t=w("eq",{externalConfig:t,displayProperty:n,type:r},"number")).eq&&t.eq<0&&(G(n),delete t.eq),{externalConfig:t,displayProperty:n,type:r}},X=function(e){var t=e.externalConfig,r=e.type,n=e.displayProperty;return"number"==typeof(t=w("timeout",{externalConfig:t,displayProperty:n,type:r},"number")).timeout&&t.timeout<0&&(V(n),delete t.timeout),{externalConfig:t,displayProperty:n,type:r}},j=function(e){var t=e.externalConfig,r=e.displayProperty,n=e.type;if("parent"in t){var o=t.parent;if(null==o){var a=null===o?"null":"undefined";throw s(["Selector `"+r+'` defines "'+a+'" "parent" attribute which is not allowed - there could be 2 reasons why you see this error:',"1) You've passed \""+a+'" to "parent" attribute - in that case just remove "parent" attribute or assign a proper selector to it',"2) You've declared parent selector after children selector - due to the way how TypeScript transpiles static class properties, it is not allowed to use static class properties before their declaration.",'To make this error go away just define "parent" before its "children".'].join("\n"),"CONFIGURATION ERROR")}}return t.parent&&"string"!=typeof t.parent[i]&&(H(r),delete t.parent),{externalConfig:t,displayProperty:r,type:n}},k=function(e){var t=e.externalConfig,r=e.displayProperty,n=e.type;return"boolean"==typeof(t=w("ignoreCase",{externalConfig:t,displayProperty:r,type:n},"boolean")).ignoreCase&&!1===O.includes(n)&&(K(r,n),delete t.ignoreCase),{externalConfig:t,displayProperty:r,type:n}},M=function(e){var t=e.externalConfig,r=e.displayProperty,n=e.type;return void 0!==t.attribute&&!1===_.includes(n)&&(Q(r,n),delete t.attribute),{externalConfig:t,displayProperty:r,type:n}},U=function(e){var t=['Selector "'+e+"\": 'parent' and 'parentAlias' attributes can't be used together in one configuration - 'parent' has precedence over 'parentAlias' so 'parentAlias' is going to be ignored.","To fix this warning remove either 'parent' or 'parentAlias' attribute."].join(" ");n.log(t,"warning")},F=function(e){n.log('Selector "'+e+"\": 'alias' attribute can't be an empty string. Consider either removing it or supplying non empty string as an alias.","warning")},q=function(e){n.log('Selector "'+e+"\": 'parentAlias' attribute can't be an empty string. Consider either removing it or supplying non empty string as a parentAlias.","warning")},Y=function(e){n.log('Selector "'+e+"\": 'attribute' attribute can't be an empty string. Consider either removing it or supplying non empty string as a custom attribute.","error")},G=function(e){n.log('Selector "'+e+"\": 'eq' attribute be a negative value.","error")},V=function(e){n.log('Selector "'+e+"\": 'timeout' attribute can't be a negative value","error")},H=function(e){n.log('Selector "'+e+"\": the value set as 'parent' is not a valid Selector.","error")},K=function(e,t){var r=d(t);n.log('Selector "'+e+'": `ignoreCase` attribute is not supported by `'+r+"` selector.","warning")},Q=function(e,t){var r=d(t);n.log('Selector "'+e+'": `attribute` attribute is not supported by `'+r+"` selector.","warning")},W=function(e,t,r,i){n.log('Selector "'+e+'": attribute "'+t+'" has the wrong type: expected - '+r+", actual - "+i+".","error")},z=e.fromPairs([[1,"ELEMENT_NODE"],[2,"ATTRIBUTE_NODE"],[3,"TEXT_NODE"],[4,"CDATA_SECTION_NODE"],[5,"ENTITY_REFERENCE_NODE"],[6,"ENTITY_NODE"],[7,"PROCESSING_INSTRUCTION_NODE"],[8,"COMMENT_NODE"],[9,"DOCUMENT_NODE"],[10,"DOCUMENT_TYPE_NODE"],[11,"DOCUMENT_FRAGMENT_NODE"],[12,"NOTATION_NODE"]]);Cypress.Commands.add("__cypress_selectors_xpath",{prevSubject:["optional","element","document"]},(function(r,n,i,o){if(Cypress.dom.isElement(r)&&r.length>1)throw s('Failed to find an element by XPath("'+n+'") - the parent is not an element but a collection of '+r.length+" elements.");return function e(){return Cypress.Promise.try((function(){return function(e,t){var r;void 0===t&&(t=cy.state("window").document);var n=[cy.state("withinSubject"),cy.state("window")],i=n[0],o=n[1].document,a=((r=Cypress.dom.isElement(t)?t[0]:Cypress.dom.isDocument(t)?t:i?i[0]:o).ownerDocument||r).evaluate(e,r);return a.resultType===XPathResult.NUMBER_TYPE?a.numberValue:a.resultType===XPathResult.STRING_TYPE?a.stringValue:a.resultType===XPathResult.BOOLEAN_TYPE?a.booleanValue:function(e){for(var t=[],r=void 0;r=e.iterateNext();)t.push(r);return 1===t.length?t[0]:t}(a)}(n,r)})).then((function(t){var r=Array.isArray(t),o=Array.isArray(t)?Cypress.$(1===t.values.length?t[0]:t):t;return r&&(o.selector=n),cy.verifyUpcomingAssertions(o,i,{onRetry:e})}))}().then((function(r){return Cypress.log(function(r,n,i){var o={"XPath Selector":n,"XPath Result":r},a="xpath"===i?"XPath":"XPath("+d(i)+")";if("object"!=typeof r)return{name:a,consoleProps:function(){return t({},o,{"Node Type":typeof r})}};if("length"in r&&"nodeType"in r==0){var l=e.toArray(r).map((function(e,t){return t+": "+z[e.nodeType]})).join(", ");return 0===r.length&&(o["XPath Result"]="None"),{name:a,consoleProps:function(){return t({},o,{"Node Type":l})}}}var s=r.nodeType;return{name:a,consoleProps:function(){return t({},o,{"Node Type":z[s]?s+" - "+z[s]:s+" - UNKNOWN_NODE_TYPE"})}}}(r,n,o)),r}))}));var J=function(p,c){return function(y,f){void 0===f&&(f={}),function(){if(!cy||"function"!=typeof cy.get)throw s("Can't find `cy.get` function. Probably you're defining selectors outside of Cypress context. Please make sure, that you're querying elements inside Cypress tests.","ENVIRONMENT ERROR")}();var g=e.pick(f,["alias","parentAlias","attribute","eq","timeout","parent","ignoreCase"]);return function(f,d){var h,x=u(f,d),m=t({},function(t,r,n){return e.flow(R,I,L,B,D,X,j,k,M)({externalConfig:t,displayProperty:r,type:n}).externalConfig}(g,x,p),{value:y,type:p}),E=null!=(h=function(e){return e[o]}(f))?h:function(e,t){var r,n=(null!=(r=e[o])?r:0)+1;return e[o]=n,t[o]=n,n}(cy,f),T=function(e,t){return"host-id: "+e+", internal-alias: "+t}(E,d),S=m.parent&&m.parent[i],N=t({},m,{internalAlias:T});return S&&(N.internalParentAlias=S),function(e,o){var p,c=e.meta,y=c.host,f=c.property,g=function(e,i){return function(){var o=t({},v.config);return o.isLoggingEnabled&&n.logSelector(A(i,o),u(i.meta.host,i.meta.property)),function(e,t){return function(e,t){return e.map((function(e){var r;return"XPath"===e.engine?{engine:"XPath",selector:C([e.selector],t),timeout:null!=(r=e.selector.config.timeout)?r:Cypress.config().defaultCommandTimeout,type:e.selector.type,eq:e.selector.config.eq}:{engine:"CSS",selector:C(e.selectors,t),timeout:P(e.selectors)}}))}(function(e){for(var t,n=[],i=[],o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,void 0):void 0}}(e))){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}(e);!(t=o()).done;){var a=t.value;"XPath"===a.engine?0===i.length?n.push([a]):(n.push(i,[a]),i=[]):i.push(a)}return i.length&&n.push(i),n.map((function(e){return"XPath"===e[0].engine?{engine:"XPath",selector:e[0]}:{engine:"CSS",selectors:e}}))}(e),t).reduce((function(e,t,r){var n={timeout:t.timeout};if("XPath"===t.engine){var i=t.eq;e="number"==typeof i?e.__cypress_selectors_xpath(t.selector,n,t.type).eq(i):e.__cypress_selectors_xpath(t.selector,n,t.type)}else e=0===r?e.get(t.selector,n):e.find(t.selector,n);return e}),cy)}(function e(t,r,n){void 0===n&&(n=[]),n=[r].concat(n);var i=r.config,o=i.parentAlias,l=i.internalParentAlias;return o?e(t,b(r.meta.host[a],o),n):l?e(t,b(t,l),n):n}(e,i),o)}}(function(e,t){var r=function(e){return!1===function(e){return e.hasOwnProperty(l)}(e)&&(e[l]=new Map),e[l]}(t);!function(e,t){var r=e.config.internalAlias;if(t.has(r))throw s('Element with the internal-alias "'+r+'" is already registered.',"DUPLICATE ALIAS");t.set(r,e)}(e,r);var n=function(e){return e[a]?e[a]:e[a]=new Map}(e.meta.host);return e.config.alias&&function(e,t,r){if(r.has(t))throw s('Element with the alias "'+t+'" is already registered.',"DUPLICATE ALIAS");r.set(t,e)}(e,e.config.alias,n),{selectorsByInternalAlias:r,selectorsByExternalAlias:n}}(e,o).selectorsByInternalAlias,e);if(function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!r||Boolean(r.configurable)}(y,f)){var d=(p=g,new Proxy({},{get:function(e,t){if("symbol"==typeof t&&i===t)return e[i];var r=p(),n=r[t];return"function"==typeof n?n.bind(r):n}}));return function(e,t){e[i]=t}(d,e.config.internalAlias),delete y[f],Object.defineProperty(y,f,{enumerable:!1,configurable:!1,value:d})}var h=u(y,f);throw s('Failed to assign selector - property "'+h+"\" is not 'configurable'","NON CONFIGURABLE FIELD")}({type:p,config:N,meta:{host:f,property:d,hostID:E},engine:c},cy)}}},Z=J("attribute","CSS"),$=J("type","CSS"),ee=J("class","CSS"),te=J("id","CSS"),re=J("selector","CSS"),ne=J("name","CSS"),ie=J("xpath","XPath"),oe=J("exact-text","XPath"),ae=J("partial-text","XPath"),le=J("exact-link-text","XPath"),se=J("partial-link-text","XPath");exports.By={Attribute:Z,Type:$,Class:ee,Id:te,Selector:re,XPath:ie,Name:ne,Text:{Exact:oe,Partial:ae},Link:{ExactText:le,PartialText:se}},exports.ByAttribute=Z,exports.ByClass=ee,exports.ByExactLinkText=le,exports.ByExactText=oe,exports.ById=te,exports.ByName=ne,exports.ByPartialLinkText=se,exports.ByPartialText=ae,exports.BySelector=re,exports.ByType=$,exports.ByXPath=ie,exports.ConfigureSelectors=x,exports.ResetSelectorsConfiguration=m;
//# sourceMappingURL=cypress-selectors.cjs.production.min.js.map
